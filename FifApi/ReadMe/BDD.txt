CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);

START TRANSACTION;

CREATE TABLE "Joueur" (
    "idJoueur" int GENERATED BY DEFAULT AS IDENTITY,
    "nomJoueur" Varchar(150) NOT NULL,
    "sexeJoueur" Char(1) NOT NULL,
    "dateNaissanceJoueur" Date NOT NULL,
    "dateDecesJoueur" Date NOT NULL,
    "debutCarriereJoueur" Date NOT NULL,
    "finCarriereJoueur" Date NOT NULL,
    "descriptionJoueur" Varchar(1000) NOT NULL,
    CONSTRAINT "PK_Joueur" PRIMARY KEY ("idJoueur")
);

CREATE TABLE "Match" (
    "idMatch" int GENERATED BY DEFAULT AS IDENTITY,
    "scoreEquipeDomicile" int NOT NULL,
    "scoreEquipeExterieure" int NOT NULL,
    "nomMatch" Vachar(50) NOT NULL,
    "dateMatch" Date NOT NULL,
    CONSTRAINT "PK_Match" PRIMARY KEY ("idMatch")
);

CREATE TABLE "JoueurMatch" (
    "joueurId" int NOT NULL,
    "matchId" int NOT NULL,
    "nbButs" int NOT NULL,
    CONSTRAINT pk_avis PRIMARY KEY ("matchId", "joueurId"),
    CONSTRAINT fk_notation_film FOREIGN KEY ("matchId") REFERENCES "Match" ("idMatch"),
    CONSTRAINT fk_notation_utilisateur FOREIGN KEY ("joueurId") REFERENCES "Joueur" ("idJoueur")
);

CREATE INDEX "IX_JoueurMatch_joueurId" ON "JoueurMatch" ("joueurId");

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240311164102_FifaBDD', '6.0.12');

COMMIT;